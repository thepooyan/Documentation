```java
EntityManagerFactory factory = Persistence.createEntityManagerFactory("pu1");
EntityManager em = factory.createEntityManager();
// get transaction
// changes
// transaction commit
// transaction close
// em close
```